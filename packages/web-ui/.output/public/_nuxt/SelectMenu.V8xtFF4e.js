import{s as h,l as he,a4 as nt,P as G,aw as Ae,ax as at,r as V,h as U,ab as ot,ay as L,v as we,j as ue,y as re,F as Ee,x as fe,A as Pe,z as $e,ad as N,ae as it,_ as ut,B as Fe,S as rt,C as le,az as st,U as Le,ag as je,D as ze,E as Ce,O as dt,V as vt,G as ct,H as ce,ao as pt,aA as ft,Q as bt,o as $,g as Z,w as ae,n as z,c as H,k as Q,ai as pe,K as Re,b as me,L as X,t as oe,a as _,T as mt,R as gt,N as ht,d as Ve,W as yt}from"./entry.RCh-zIuy.js";import{u as q,D as E,F as Te,o as x,w as Ne,t as qe,d as ee,k as He,G as Ue,l as Ke,g as Y,B as Se,j as ne,s as We,i as Ot,r as se,q as Ge,H as St,I as Je,O as Qe,v as k,J as De,K as Be,L as It,f as xt,h as Ct,M as Rt,z as Mt,y as Tt}from"./api.8WJftHjd.js";/**
 * vue-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},ye.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},Oe.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ie(e,u,l){var a,t=(a=l.initialDeps)!=null?a:[],n;return function(){var o;l.key&&l.debug!=null&&l.debug()&&(o=Date.now());var i=e(),d=i.length!==t.length||i.some(function(R,P){return t[P]!==R});if(!d)return n;t=i;var r;if(l.key&&l.debug!=null&&l.debug()&&(r=Date.now()),n=u.apply(void 0,i),l.key&&l.debug!=null&&l.debug()){var s=Math.round((Date.now()-o)*100)/100,m=Math.round((Date.now()-r)*100)/100,C=m/16,I=function(P,B){for(P=String(P);P.length<B;)P=" "+P;return P};console.info("%c⏱ "+I(m,5)+" /"+I(s,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*C,120))+"deg 100% 31%);",l==null?void 0:l.key)}return l==null||l.onChange==null||l.onChange(n),n}}function Me(e,u){if(e===void 0)throw new Error("Unexpected undefined"+(u?": "+u:""));return e}var wt=function(u,l){return Math.abs(u-l)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Et=function(u){return u},Pt=function(u){for(var l=Math.max(u.startIndex-u.overscan,0),a=Math.min(u.endIndex+u.overscan,u.count-1),t=[],n=l;n<=a;n++)t.push(n);return t},kt=function(u,l){var a=u.scrollElement;if(a){var t=function(i){var d=i.width,r=i.height;l({width:Math.round(d),height:Math.round(r)})};t(a.getBoundingClientRect());var n=new ResizeObserver(function(o){var i=o[0];if(i!=null&&i.borderBoxSize){var d=i.borderBoxSize[0];if(d){t({width:d.inlineSize,height:d.blockSize});return}}t(a.getBoundingClientRect())});return n.observe(a,{box:"border-box"}),function(){n.unobserve(a)}}},At=function(u,l){var a=u.scrollElement;if(a){var t=function(){l(a[u.options.horizontal?"scrollLeft":"scrollTop"])};return t(),a.addEventListener("scroll",t,{passive:!0}),function(){a.removeEventListener("scroll",t)}}},zt=function(u,l,a){if(l!=null&&l.borderBoxSize){var t=l.borderBoxSize[0];if(t){var n=Math.round(t[a.options.horizontal?"inlineSize":"blockSize"]);return n}}return Math.round(u.getBoundingClientRect()[a.options.horizontal?"width":"height"])},Vt=function(u,l,a){var t,n,o=l.adjustments,i=o===void 0?0:o,d=l.behavior,r=u+i;(t=a.scrollElement)==null||t.scrollTo==null||t.scrollTo((n={},n[a.options.horizontal?"left":"top"]=r,n.behavior=d,n))},Dt=function(u){var l=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var a=null,t=function(){return a||(typeof ResizeObserver<"u"?a=new ResizeObserver(function(o){o.forEach(function(i){l._measureElement(i.target,i)})}):null)};return{disconnect:function(){var o;return(o=t())==null?void 0:o.disconnect()},observe:function(o){var i;return(i=t())==null?void 0:i.observe(o,{box:"border-box"})},unobserve:function(o){var i;return(i=t())==null?void 0:i.unobserve(o)}}}(),this.range=null,this.setOptions=function(a){Object.entries(a).forEach(function(t){var n=t[0],o=t[1];typeof o>"u"&&delete a[n]}),l.options=Oe({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Et,rangeExtractor:Pt,onChange:function(){},measureElement:zt,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},a)},this.notify=function(a){l.options.onChange==null||l.options.onChange(l,a)},this.maybeNotify=ie(function(){return l.calculateRange(),[l.isScrolling,l.range?l.range.startIndex:null,l.range?l.range.endIndex:null]},function(a){l.notify(a)},{key:!1,debug:function(){return l.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){l.unsubs.filter(Boolean).forEach(function(a){return a()}),l.unsubs=[],l.scrollElement=null},this._didMount=function(){return l.measureElementCache.forEach(l.observer.observe),function(){l.observer.disconnect(),l.cleanup()}},this._willUpdate=function(){var a=l.options.getScrollElement();l.scrollElement!==a&&(l.cleanup(),l.scrollElement=a,l._scrollToOffset(l.scrollOffset,{adjustments:void 0,behavior:void 0}),l.unsubs.push(l.options.observeElementRect(l,function(t){l.scrollRect=t,l.maybeNotify()})),l.unsubs.push(l.options.observeElementOffset(l,function(t){l.scrollAdjustments=0,l.scrollOffset!==t&&(l.isScrollingTimeoutId!==null&&(clearTimeout(l.isScrollingTimeoutId),l.isScrollingTimeoutId=null),l.isScrolling=!0,l.scrollDirection=l.scrollOffset<t?"forward":"backward",l.scrollOffset=t,l.maybeNotify(),l.isScrollingTimeoutId=setTimeout(function(){l.isScrollingTimeoutId=null,l.isScrolling=!1,l.scrollDirection=null,l.maybeNotify()},l.options.scrollingDelay))})))},this.getSize=function(){return l.scrollRect[l.options.horizontal?"width":"height"]},this.memoOptions=ie(function(){return[l.options.count,l.options.paddingStart,l.options.scrollMargin,l.options.getItemKey]},function(a,t,n,o){return l.pendingMeasuredCacheIndexes=[],{count:a,paddingStart:t,scrollMargin:n,getItemKey:o}},{key:!1}),this.getFurthestMeasurement=function(a,t){for(var n=new Map,o=new Map,i=t-1;i>=0;i--){var d=a[i];if(!n.has(d.lane)){var r=o.get(d.lane);if(r==null||d.end>r.end?o.set(d.lane,d):d.end<r.end&&n.set(d.lane,!0),n.size===l.options.lanes)break}}return o.size===l.options.lanes?Array.from(o.values()).sort(function(s,m){return s.end-m.end})[0]:void 0},this.getMeasurements=ie(function(){return[l.memoOptions(),l.itemSizeCache]},function(a,t){var n=a.count,o=a.paddingStart,i=a.scrollMargin,d=a.getItemKey,r=l.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,l.pendingMeasuredCacheIndexes):0;l.pendingMeasuredCacheIndexes=[];for(var s=l.measurementsCache.slice(0,r),m=r;m<n;m++){var C=d(m),I=l.options.lanes===1?s[m-1]:l.getFurthestMeasurement(s,m),R=I?I.end:o+i,P=t.get(C),B=typeof P=="number"?P:l.options.estimateSize(m),p=R+B,v=I?I.lane:m%l.options.lanes;s[m]={index:m,start:R,size:B,end:p,key:C,lane:v}}return l.measurementsCache=s,s},{key:!1,debug:function(){return l.options.debug}}),this.calculateRange=ie(function(){return[l.getMeasurements(),l.getSize(),l.scrollOffset]},function(a,t,n){return l.range=a.length>0&&t>0?Bt({measurements:a,outerSize:t,scrollOffset:n}):null},{key:!1,debug:function(){return l.options.debug}}),this.getIndexes=ie(function(){return[l.options.rangeExtractor,l.calculateRange(),l.options.overscan,l.options.count]},function(a,t,n,o){return t===null?[]:a(Oe({},t,{overscan:n,count:o}))},{key:!1,debug:function(){return l.options.debug}}),this.indexFromElement=function(a){var t=l.options.indexAttribute,n=a.getAttribute(t);return n?parseInt(n,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(a,t){var n=l.measurementsCache[l.indexFromElement(a)];if(!n||!a.isConnected){l.measureElementCache.forEach(function(d,r){d===a&&(l.observer.unobserve(a),l.measureElementCache.delete(r))});return}var o=l.measureElementCache.get(n.key);o!==a&&(o&&l.observer.unobserve(o),l.observer.observe(a),l.measureElementCache.set(n.key,a));var i=l.options.measureElement(a,t,l);l.resizeItem(n,i)},this.resizeItem=function(a,t){var n,o=(n=l.itemSizeCache.get(a.key))!=null?n:a.size,i=t-o;i!==0&&(a.start<l.scrollOffset&&l._scrollToOffset(l.scrollOffset,{adjustments:l.scrollAdjustments+=i,behavior:void 0}),l.pendingMeasuredCacheIndexes.push(a.index),l.itemSizeCache=new Map(l.itemSizeCache.set(a.key,t)),l.notify(!1))},this.measureElement=function(a){a&&l._measureElement(a,void 0)},this.getVirtualItems=ie(function(){return[l.getIndexes(),l.getMeasurements()]},function(a,t){for(var n=[],o=0,i=a.length;o<i;o++){var d=a[o],r=t[d];n.push(r)}return n},{key:!1,debug:function(){return l.options.debug}}),this.getVirtualItemForOffset=function(a){var t=l.getMeasurements();return Me(t[Ye(0,t.length-1,function(n){return Me(t[n]).start},a)])},this.getOffsetForAlignment=function(a,t){var n=l.getSize();t==="auto"&&(a<=l.scrollOffset?t="start":a>=l.scrollOffset+n?t="end":t="start"),t==="start"?a=a:t==="end"?a=a-n:t==="center"&&(a=a-n/2);var o=l.options.horizontal?"scrollWidth":"scrollHeight",i=l.scrollElement?"document"in l.scrollElement?l.scrollElement.document.documentElement[o]:l.scrollElement[o]:0,d=i-l.getSize();return Math.max(Math.min(d,a),0)},this.getOffsetForIndex=function(a,t){t===void 0&&(t="auto"),a=Math.max(0,Math.min(a,l.options.count-1));var n=Me(l.getMeasurements()[a]);if(t==="auto")if(n.end>=l.scrollOffset+l.getSize()-l.options.scrollPaddingEnd)t="end";else if(n.start<=l.scrollOffset+l.options.scrollPaddingStart)t="start";else return[l.scrollOffset,t];var o=t==="end"?n.end+l.options.scrollPaddingEnd:n.start-l.options.scrollPaddingStart;return[l.getOffsetForAlignment(o,t),t]},this.isDynamicMode=function(){return l.measureElementCache.size>0},this.cancelScrollToIndex=function(){l.scrollToIndexTimeoutId!==null&&(clearTimeout(l.scrollToIndexTimeoutId),l.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(a,t){var n=t===void 0?{}:t,o=n.align,i=o===void 0?"start":o,d=n.behavior;l.cancelScrollToIndex(),d==="smooth"&&l.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),l._scrollToOffset(l.getOffsetForAlignment(a,i),{adjustments:void 0,behavior:d})},this.scrollToIndex=function(a,t){var n=t===void 0?{}:t,o=n.align,i=o===void 0?"auto":o,d=n.behavior;a=Math.max(0,Math.min(a,l.options.count-1)),l.cancelScrollToIndex(),d==="smooth"&&l.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var r=l.getOffsetForIndex(a,i),s=r[0],m=r[1];l._scrollToOffset(s,{adjustments:void 0,behavior:d}),d!=="smooth"&&l.isDynamicMode()&&(l.scrollToIndexTimeoutId=setTimeout(function(){l.scrollToIndexTimeoutId=null;var C=l.measureElementCache.has(l.options.getItemKey(a));if(C){var I=l.getOffsetForIndex(a,m),R=I[0];wt(R,l.scrollOffset)||l.scrollToIndex(a,{align:m,behavior:d})}else l.scrollToIndex(a,{align:m,behavior:d})}))},this.scrollBy=function(a,t){var n=t===void 0?{}:t,o=n.behavior;l.cancelScrollToIndex(),o==="smooth"&&l.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),l._scrollToOffset(l.scrollOffset+a,{adjustments:void 0,behavior:o})},this.getTotalSize=function(){var a;return(((a=l.getMeasurements()[l.options.count-1])==null?void 0:a.end)||l.options.paddingStart)-l.options.scrollMargin+l.options.paddingEnd},this._scrollToOffset=function(a,t){var n=t.adjustments,o=t.behavior;l.options.scrollToFn(a,{behavior:o,adjustments:n},l)},this.measure=function(){l.itemSizeCache=new Map,l.notify(!1)},this.setOptions(u),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(a){l.itemSizeCache.set(a.key,a.size)}),this.maybeNotify()},Ye=function(u,l,a,t){for(;u<=l;){var n=(u+l)/2|0,o=a(n);if(o<t)u=n+1;else if(o>t)l=n-1;else return n}return u>0?u-1:0};function Bt(e){for(var u=e.measurements,l=e.outerSize,a=e.scrollOffset,t=u.length-1,n=function(r){return u[r].start},o=Ye(0,t,n,a),i=o;i<t&&u[i].end<a+l;)i++;return{startIndex:o,endIndex:i}}/**
 * vue-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $t(e){var u=new Dt(he(e)),l=nt(u),a=u._didMount();return G(function(){return he(e).getScrollElement()},function(t){t&&u._willUpdate()},{immediate:!0}),G(function(){return he(e)},function(t){u.setOptions(ye({},t,{onChange:function(o,i){Ae(l),t.onChange==null||t.onChange(o,i)}})),u._willUpdate(),Ae(l)},{immediate:!0}),at(a),l}function Ft(e){return $t(h(function(){return ye({observeElementRect:kt,observeElementOffset:At,scrollToFn:Vt},he(e))}))}function Ze(e,u,l){let a=V(l==null?void 0:l.value),t=h(()=>e.value!==void 0);return[h(()=>t.value?e.value:a.value),function(n){return t.value||(a.value=n),u==null?void 0:u(n)}]}function ke(e={},u=null,l=[]){for(let[a,t]of Object.entries(e))_e(l,Xe(u,a),t);return l}function Xe(e,u){return e?e+"["+u+"]":u}function _e(e,u,l){if(Array.isArray(l))for(let[a,t]of l.entries())_e(e,Xe(u,a.toString()),t);else l instanceof Date?e.push([u,l.toISOString()]):typeof l=="boolean"?e.push([u,l?"1":"0"]):typeof l=="string"?e.push([u,l]):typeof l=="number"?e.push([u,`${l}`]):l==null?e.push([u,""]):ke(l,u,e)}var Lt={};function jt(e,u){return e===u}var Nt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Nt||{}),qt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(qt||{}),Ht=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Ht||{});let et=Symbol("ComboboxContext");function de(e){let u=Pe(et,null);if(u===null){let l=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,de),l}return u}let tt=Symbol("VirtualContext"),Ut=U({name:"VirtualProvider",setup(e,{slots:u}){let l=de("VirtualProvider"),a=h(()=>{let i=x(l.optionsRef);if(!i)return{start:0,end:0};let d=window.getComputedStyle(i);return{start:parseFloat(d.paddingBlockStart||d.paddingTop),end:parseFloat(d.paddingBlockEnd||d.paddingBottom)}}),t=Ft(h(()=>({scrollPaddingStart:a.value.start,scrollPaddingEnd:a.value.end,count:l.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return x(l.optionsRef)},overscan:12}))),n=h(()=>{var i;return(i=l.virtual.value)==null?void 0:i.options}),o=V(0);return G([n],()=>{o.value+=1}),we(tt,l.virtual.value?t:null),()=>[re("div",{style:{position:"relative",width:"100%",height:`${t.value.getTotalSize()}px`},ref:i=>{if(i){if(typeof process<"u"&&Lt.JEST_WORKER_ID!==void 0||l.activationTrigger.value===0)return;l.activeOptionIndex.value!==null&&l.virtual.value.options.length>l.activeOptionIndex.value&&t.value.scrollToIndex(l.activeOptionIndex.value)}}},t.value.getVirtualItems().map(i=>it(u.default({option:l.virtual.value.options[i.index],open:l.comboboxState.value===0})[0],{key:`${o.value}-${i.index}`,"data-index":i.index,"aria-setsize":l.virtual.value.options.length,"aria-posinset":i.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${i.start}px)`,overflowAnchor:"none"}})))]}}),Kt=U({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:u,attrs:l,emit:a}){let t=V(1),n=V(null),o=V(null),i=V(null),d=V(null),r=V({static:!1,hold:!1}),s=V([]),m=V(null),C=V(2),I=V(!1);function R(g=S=>S){let S=m.value!==null?s.value[m.value]:null,T=g(s.value.slice()),M=T.length>0&&T[0].dataRef.order.value!==null?T.sort((D,K)=>D.dataRef.order.value-K.dataRef.order.value):Qe(T,D=>x(D.dataRef.domRef)),A=S?M.indexOf(S):null;return A===-1&&(A=null),{options:M,activeOptionIndex:A}}let P=h(()=>e.multiple?1:0),B=h(()=>e.nullable),[p,v]=Ze(h(()=>e.modelValue),g=>a("update:modelValue",g),h(()=>e.defaultValue)),c=h(()=>p.value===void 0?q(P.value,{1:[],0:void 0}):p.value),b=null,y=null;function O(g){return q(P.value,{0(){return v==null?void 0:v(g)},1:()=>{let S=L(f.value.value).slice(),T=L(g),M=S.findIndex(A=>f.compare(T,L(A)));return M===-1?S.push(T):S.splice(M,1),v==null?void 0:v(S)}})}let w=h(()=>{});G([w],([g],[S])=>{if(f.virtual.value&&g&&S&&m.value!==null){let T=g.indexOf(S[m.value]);T!==-1?m.value=T:m.value=null}});let f={comboboxState:t,value:c,mode:P,compare(g,S){if(typeof e.by=="string"){let T=e.by;return(g==null?void 0:g[T])===(S==null?void 0:S[T])}return e.by===null?jt(g,S):e.by(g,S)},calculateIndex(g){return f.virtual.value?e.by===null?f.virtual.value.options.indexOf(g):f.virtual.value.options.findIndex(S=>f.compare(S,g)):s.value.findIndex(S=>f.compare(S.dataRef.value,g))},defaultValue:h(()=>e.defaultValue),nullable:B,immediate:h(()=>!1),virtual:h(()=>null),inputRef:o,labelRef:n,buttonRef:i,optionsRef:d,disabled:h(()=>e.disabled),options:s,change(g){v(g)},activeOptionIndex:h(()=>{if(I.value&&m.value===null&&(f.virtual.value?f.virtual.value.options.length>0:s.value.length>0)){if(f.virtual.value){let S=f.virtual.value.options.findIndex(T=>{var M;return!((M=f.virtual.value)!=null&&M.disabled(T))});if(S!==-1)return S}let g=s.value.findIndex(S=>!S.dataRef.disabled);if(g!==-1)return g}return m.value}),activationTrigger:C,optionsPropsRef:r,closeCombobox(){I.value=!1,!e.disabled&&t.value!==1&&(t.value=1,m.value=null)},openCombobox(){if(I.value=!0,!e.disabled&&t.value!==0){if(f.value.value){let g=f.calculateIndex(f.value.value);g!==-1&&(m.value=g)}t.value=0}},setActivationTrigger(g){C.value=g},goToOption(g,S,T){I.value=!1,b!==null&&cancelAnimationFrame(b),b=requestAnimationFrame(()=>{if(e.disabled||d.value&&!r.value.static&&t.value===1)return;if(f.virtual.value){m.value=g===E.Specific?S:Te({focus:g},{resolveItems:()=>f.virtual.value.options,resolveActiveIndex:()=>{var D,K;return(K=(D=f.activeOptionIndex.value)!=null?D:f.virtual.value.options.findIndex(ve=>{var te;return!((te=f.virtual.value)!=null&&te.disabled(ve))}))!=null?K:null},resolveDisabled:D=>f.virtual.value.disabled(D),resolveId(){throw new Error("Function not implemented.")}}),C.value=T??2;return}let M=R();if(M.activeOptionIndex===null){let D=M.options.findIndex(K=>!K.dataRef.disabled);D!==-1&&(M.activeOptionIndex=D)}let A=g===E.Specific?S:Te({focus:g},{resolveItems:()=>M.options,resolveActiveIndex:()=>M.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});m.value=A,C.value=T??2,s.value=M.options})},selectOption(g){let S=s.value.find(M=>M.id===g);if(!S)return;let{dataRef:T}=S;O(T.value)},selectActiveOption(){if(f.activeOptionIndex.value!==null){if(f.virtual.value)O(f.virtual.value.options[f.activeOptionIndex.value]);else{let{dataRef:g}=s.value[f.activeOptionIndex.value];O(g.value)}f.goToOption(E.Specific,f.activeOptionIndex.value)}},registerOption(g,S){let T=ot({id:g,dataRef:S});if(f.virtual.value){s.value.push(T);return}y&&cancelAnimationFrame(y);let M=R(A=>(A.push(T),A));m.value===null&&f.isSelected(S.value.value)&&(M.activeOptionIndex=M.options.indexOf(T)),s.value=M.options,m.value=M.activeOptionIndex,C.value=2,M.options.some(A=>!x(A.dataRef.domRef))&&(y=requestAnimationFrame(()=>{let A=R();s.value=A.options,m.value=A.activeOptionIndex}))},unregisterOption(g,S){if(b!==null&&cancelAnimationFrame(b),S&&(I.value=!0),f.virtual.value){s.value=s.value.filter(M=>M.id!==g);return}let T=R(M=>{let A=M.findIndex(D=>D.id===g);return A!==-1&&M.splice(A,1),M});s.value=T.options,m.value=T.activeOptionIndex,C.value=2},isSelected(g){return q(P.value,{0:()=>f.compare(L(f.value.value),L(g)),1:()=>L(f.value.value).some(S=>f.compare(L(S),L(g)))})},isActive(g){return m.value===f.calculateIndex(g)}};Ne([o,i,d],()=>f.closeCombobox(),h(()=>t.value===0)),we(et,f),qe(h(()=>q(t.value,{0:ee.Open,1:ee.Closed})));let j=h(()=>{var g;return(g=x(o))==null?void 0:g.closest("form")});return ue(()=>{G([j],()=>{if(!j.value||e.defaultValue===void 0)return;function g(){f.change(e.defaultValue)}return j.value.addEventListener("reset",g),()=>{var S;(S=j.value)==null||S.removeEventListener("reset",g)}},{immediate:!0})}),()=>{var g,S,T;let{name:M,disabled:A,form:D,...K}=e,ve={open:t.value===0,disabled:A,activeIndex:f.activeOptionIndex.value,activeOption:f.activeOptionIndex.value===null?null:f.virtual.value?f.virtual.value.options[(g=f.activeOptionIndex.value)!=null?g:0]:(T=(S=f.options.value[f.activeOptionIndex.value])==null?void 0:S.dataRef.value.value)!=null?T:null,value:c.value};return re(Ee,[...M!=null&&c.value!=null?ke({[M]:c.value}).map(([te,F])=>re(He,Ue({features:Ke.Hidden,key:te,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:D,name:te,value:F}))):[],Y({theirProps:{...l,...Se(K,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:ve,slots:u,attrs:l,name:"Combobox"})])}}}),Wt=U({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${ne()}`}},setup(e,{attrs:u,slots:l,expose:a}){let t=de("ComboboxButton");a({el:t.buttonRef,$el:t.buttonRef});function n(d){t.disabled.value||(t.comboboxState.value===0?t.closeCombobox():(d.preventDefault(),t.openCombobox()),N(()=>{var r;return(r=x(t.inputRef))==null?void 0:r.focus({preventScroll:!0})}))}function o(d){switch(d.key){case k.ArrowDown:d.preventDefault(),d.stopPropagation(),t.comboboxState.value===1&&t.openCombobox(),N(()=>{var r;return(r=t.inputRef.value)==null?void 0:r.focus({preventScroll:!0})});return;case k.ArrowUp:d.preventDefault(),d.stopPropagation(),t.comboboxState.value===1&&(t.openCombobox(),N(()=>{t.value.value||t.goToOption(E.Last)})),N(()=>{var r;return(r=t.inputRef.value)==null?void 0:r.focus({preventScroll:!0})});return;case k.Escape:if(t.comboboxState.value!==0)return;d.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&d.stopPropagation(),t.closeCombobox(),N(()=>{var r;return(r=t.inputRef.value)==null?void 0:r.focus({preventScroll:!0})});return}}let i=We(h(()=>({as:e.as,type:u.type})),t.buttonRef);return()=>{var d,r;let s={open:t.comboboxState.value===0,disabled:t.disabled.value,value:t.value.value},{id:m,...C}=e,I={ref:t.buttonRef,id:m,type:i.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(d=x(t.optionsRef))==null?void 0:d.id,"aria-expanded":t.comboboxState.value===0,"aria-labelledby":t.labelRef.value?[(r=x(t.labelRef))==null?void 0:r.id,m].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:o,onClick:n};return Y({ourProps:I,theirProps:C,slot:s,attrs:u,slots:l,name:"ComboboxButton"})}}}),Gt=U({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${ne()}`}},emits:{change:e=>!0},setup(e,{emit:u,attrs:l,slots:a,expose:t}){let n=de("ComboboxInput"),o=h(()=>Ot(x(n.inputRef))),i={value:!1};t({el:n.inputRef,$el:n.inputRef});function d(){n.change(null);let v=x(n.optionsRef);v&&(v.scrollTop=0),n.goToOption(E.Nothing)}let r=h(()=>{var v;let c=n.value.value;return x(n.inputRef)?typeof e.displayValue<"u"&&c!==void 0?(v=e.displayValue(c))!=null?v:"":typeof c=="string"?c:"":""});ue(()=>{G([r,n.comboboxState,o],([v,c],[b,y])=>{if(i.value)return;let O=x(n.inputRef);O&&((y===0&&c===1||v!==b)&&(O.value=v),requestAnimationFrame(()=>{var w;if(i.value||!O||((w=o.value)==null?void 0:w.activeElement)!==O)return;let{selectionStart:f,selectionEnd:j}=O;Math.abs((j??0)-(f??0))===0&&f===0&&O.setSelectionRange(O.value.length,O.value.length)}))},{immediate:!0}),G([n.comboboxState],([v],[c])=>{if(v===0&&c===1){if(i.value)return;let b=x(n.inputRef);if(!b)return;let y=b.value,{selectionStart:O,selectionEnd:w,selectionDirection:f}=b;b.value="",b.value=y,f!==null?b.setSelectionRange(O,w,f):b.setSelectionRange(O,w)}})});let s=V(!1);function m(){s.value=!0}function C(){De().nextFrame(()=>{s.value=!1})}function I(v){switch(i.value=!0,v.key){case k.Enter:if(i.value=!1,n.comboboxState.value!==0||s.value)return;if(v.preventDefault(),v.stopPropagation(),n.activeOptionIndex.value===null){n.closeCombobox();return}n.selectActiveOption(),n.mode.value===0&&n.closeCombobox();break;case k.ArrowDown:return i.value=!1,v.preventDefault(),v.stopPropagation(),q(n.comboboxState.value,{0:()=>n.goToOption(E.Next),1:()=>n.openCombobox()});case k.ArrowUp:return i.value=!1,v.preventDefault(),v.stopPropagation(),q(n.comboboxState.value,{0:()=>n.goToOption(E.Previous),1:()=>{n.openCombobox(),N(()=>{n.value.value||n.goToOption(E.Last)})}});case k.Home:if(v.shiftKey)break;return i.value=!1,v.preventDefault(),v.stopPropagation(),n.goToOption(E.First);case k.PageUp:return i.value=!1,v.preventDefault(),v.stopPropagation(),n.goToOption(E.First);case k.End:if(v.shiftKey)break;return i.value=!1,v.preventDefault(),v.stopPropagation(),n.goToOption(E.Last);case k.PageDown:return i.value=!1,v.preventDefault(),v.stopPropagation(),n.goToOption(E.Last);case k.Escape:if(i.value=!1,n.comboboxState.value!==0)return;v.preventDefault(),n.optionsRef.value&&!n.optionsPropsRef.value.static&&v.stopPropagation(),n.nullable.value&&n.mode.value===0&&n.value.value===null&&d(),n.closeCombobox();break;case k.Tab:if(i.value=!1,n.comboboxState.value!==0)return;n.mode.value===0&&n.activationTrigger.value!==1&&n.selectActiveOption(),n.closeCombobox();break}}function R(v){u("change",v),n.nullable.value&&n.mode.value===0&&v.target.value===""&&d(),n.openCombobox()}function P(v){var c,b,y;let O=(c=v.relatedTarget)!=null?c:Be.find(w=>w!==v.currentTarget);if(i.value=!1,!((b=x(n.optionsRef))!=null&&b.contains(O))&&!((y=x(n.buttonRef))!=null&&y.contains(O))&&n.comboboxState.value===0)return v.preventDefault(),n.mode.value===0&&(n.nullable.value&&n.value.value===null?d():n.activationTrigger.value!==1&&n.selectActiveOption()),n.closeCombobox()}function B(v){var c,b,y;let O=(c=v.relatedTarget)!=null?c:Be.find(w=>w!==v.currentTarget);(b=x(n.buttonRef))!=null&&b.contains(O)||(y=x(n.optionsRef))!=null&&y.contains(O)||n.disabled.value||n.immediate.value&&n.comboboxState.value!==0&&(n.openCombobox(),De().nextFrame(()=>{n.setActivationTrigger(1)}))}let p=h(()=>{var v,c,b,y;return(y=(b=(c=e.defaultValue)!=null?c:n.defaultValue.value!==void 0?(v=e.displayValue)==null?void 0:v.call(e,n.defaultValue.value):null)!=null?b:n.defaultValue.value)!=null?y:""});return()=>{var v,c,b,y,O,w,f;let j={open:n.comboboxState.value===0},{id:g,displayValue:S,onChange:T,...M}=e,A={"aria-controls":(v=n.optionsRef.value)==null?void 0:v.id,"aria-expanded":n.comboboxState.value===0,"aria-activedescendant":n.activeOptionIndex.value===null?void 0:n.virtual.value?(c=n.options.value.find(D=>!n.virtual.value.disabled(D.dataRef.value)&&n.compare(D.dataRef.value,n.virtual.value.options[n.activeOptionIndex.value])))==null?void 0:c.id:(b=n.options.value[n.activeOptionIndex.value])==null?void 0:b.id,"aria-labelledby":(w=(y=x(n.labelRef))==null?void 0:y.id)!=null?w:(O=x(n.buttonRef))==null?void 0:O.id,"aria-autocomplete":"list",id:g,onCompositionstart:m,onCompositionend:C,onKeydown:I,onInput:R,onFocus:B,onBlur:P,role:"combobox",type:(f=l.type)!=null?f:"text",tabIndex:0,ref:n.inputRef,defaultValue:p.value,disabled:n.disabled.value===!0?!0:void 0};return Y({ourProps:A,theirProps:M,slot:j,attrs:l,slots:a,features:se.RenderStrategy|se.Static,name:"ComboboxInput"})}}}),Jt=U({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:u,slots:l,expose:a}){let t=de("ComboboxOptions"),n=`headlessui-combobox-options-${ne()}`;a({el:t.optionsRef,$el:t.optionsRef}),fe(()=>{t.optionsPropsRef.value.static=e.static}),fe(()=>{t.optionsPropsRef.value.hold=e.hold});let o=Ge(),i=h(()=>o!==null?(o.value&ee.Open)===ee.Open:t.comboboxState.value===0);return St({container:h(()=>x(t.optionsRef)),enabled:h(()=>t.comboboxState.value===0),accept(d){return d.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:d.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(d){d.setAttribute("role","none")}}),()=>{var d,r,s;let m={open:t.comboboxState.value===0},C={"aria-labelledby":(s=(d=x(t.labelRef))==null?void 0:d.id)!=null?s:(r=x(t.buttonRef))==null?void 0:r.id,id:n,ref:t.optionsRef,role:"listbox","aria-multiselectable":t.mode.value===1?!0:void 0},I=Se(e,["hold"]);return Y({ourProps:C,theirProps:I,slot:m,attrs:u,slots:t.virtual.value&&t.comboboxState.value===0?{...l,default:()=>[re(Ut,{},l.default)]}:l,features:se.RenderStrategy|se.Static,visible:i.value,name:"ComboboxOptions"})}}}),Qt=U({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:u,attrs:l,expose:a}){let t=de("ComboboxOption"),n=`headlessui-combobox-option-${ne()}`,o=V(null);a({el:o,$el:o});let i=h(()=>{var p;return t.virtual.value?t.activeOptionIndex.value===t.calculateIndex(e.value):t.activeOptionIndex.value===null?!1:((p=t.options.value[t.activeOptionIndex.value])==null?void 0:p.id)===n}),d=h(()=>t.isSelected(e.value)),r=Pe(tt,null),s=h(()=>({disabled:e.disabled,value:e.value,domRef:o,order:h(()=>e.order)}));ue(()=>t.registerOption(n,s)),$e(()=>t.unregisterOption(n,i.value)),fe(()=>{let p=x(o);p&&(r==null||r.value.measureElement(p))}),fe(()=>{t.comboboxState.value===0&&i.value&&(t.virtual.value||t.activationTrigger.value!==0&&N(()=>{var p,v;return(v=(p=x(o))==null?void 0:p.scrollIntoView)==null?void 0:v.call(p,{block:"nearest"})}))});function m(p){var v;if(e.disabled||(v=t.virtual.value)!=null&&v.disabled(e.value))return p.preventDefault();t.selectOption(n),It()||requestAnimationFrame(()=>{var c;return(c=x(t.inputRef))==null?void 0:c.focus({preventScroll:!0})}),t.mode.value===0&&requestAnimationFrame(()=>t.closeCombobox())}function C(){var p;if(e.disabled||(p=t.virtual.value)!=null&&p.disabled(e.value))return t.goToOption(E.Nothing);let v=t.calculateIndex(e.value);t.goToOption(E.Specific,v)}let I=Je();function R(p){I.update(p)}function P(p){var v;if(!I.wasMoved(p)||e.disabled||(v=t.virtual.value)!=null&&v.disabled(e.value)||i.value)return;let c=t.calculateIndex(e.value);t.goToOption(E.Specific,c,0)}function B(p){var v;I.wasMoved(p)&&(e.disabled||(v=t.virtual.value)!=null&&v.disabled(e.value)||i.value&&(t.optionsPropsRef.value.hold||t.goToOption(E.Nothing)))}return()=>{let{disabled:p}=e,v={active:i.value,selected:d.value,disabled:p},c={id:n,ref:o,role:"option",tabIndex:p===!0?void 0:-1,"aria-disabled":p===!0?!0:void 0,"aria-selected":d.value,disabled:void 0,onClick:m,onFocus:C,onPointerenter:R,onMouseenter:R,onPointermove:P,onMousemove:P,onPointerleave:B,onMouseleave:B},b=Se(e,["order","value"]);return Y({ourProps:c,theirProps:b,slot:v,attrs:l,slots:u,name:"ComboboxOption"})}}});function Yt(e,u){return e===u}var Zt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Zt||{}),Xt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Xt||{}),_t=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(_t||{});function el(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let lt=Symbol("ListboxContext");function Ie(e){let u=Pe(lt,null);if(u===null){let l=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,Ie),l}return u}let tl=U({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Yt},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:u,attrs:l,emit:a}){let t=V(1),n=V(null),o=V(null),i=V(null),d=V([]),r=V(""),s=V(null),m=V(1);function C(c=b=>b){let b=s.value!==null?d.value[s.value]:null,y=Qe(c(d.value.slice()),w=>x(w.dataRef.domRef)),O=b?y.indexOf(b):null;return O===-1&&(O=null),{options:y,activeOptionIndex:O}}let I=h(()=>e.multiple?1:0),[R,P]=Ze(h(()=>e.modelValue),c=>a("update:modelValue",c),h(()=>e.defaultValue)),B=h(()=>R.value===void 0?q(I.value,{1:[],0:void 0}):R.value),p={listboxState:t,value:B,mode:I,compare(c,b){if(typeof e.by=="string"){let y=e.by;return(c==null?void 0:c[y])===(b==null?void 0:b[y])}return e.by(c,b)},orientation:h(()=>e.horizontal?"horizontal":"vertical"),labelRef:n,buttonRef:o,optionsRef:i,disabled:h(()=>e.disabled),options:d,searchQuery:r,activeOptionIndex:s,activationTrigger:m,closeListbox(){e.disabled||t.value!==1&&(t.value=1,s.value=null)},openListbox(){e.disabled||t.value!==0&&(t.value=0)},goToOption(c,b,y){if(e.disabled||t.value===1)return;let O=C(),w=Te(c===E.Specific?{focus:E.Specific,id:b}:{focus:c},{resolveItems:()=>O.options,resolveActiveIndex:()=>O.activeOptionIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.disabled});r.value="",s.value=w,m.value=y??1,d.value=O.options},search(c){if(e.disabled||t.value===1)return;let b=r.value!==""?0:1;r.value+=c.toLowerCase();let y=(s.value!==null?d.value.slice(s.value+b).concat(d.value.slice(0,s.value+b)):d.value).find(w=>w.dataRef.textValue.startsWith(r.value)&&!w.dataRef.disabled),O=y?d.value.indexOf(y):-1;O===-1||O===s.value||(s.value=O,m.value=1)},clearSearch(){e.disabled||t.value!==1&&r.value!==""&&(r.value="")},registerOption(c,b){let y=C(O=>[...O,{id:c,dataRef:b}]);d.value=y.options,s.value=y.activeOptionIndex},unregisterOption(c){let b=C(y=>{let O=y.findIndex(w=>w.id===c);return O!==-1&&y.splice(O,1),y});d.value=b.options,s.value=b.activeOptionIndex,m.value=1},theirOnChange(c){e.disabled||P(c)},select(c){e.disabled||P(q(I.value,{0:()=>c,1:()=>{let b=L(p.value.value).slice(),y=L(c),O=b.findIndex(w=>p.compare(y,L(w)));return O===-1?b.push(y):b.splice(O,1),b}}))}};Ne([o,i],(c,b)=>{var y;p.closeListbox(),xt(b,Ct.Loose)||(c.preventDefault(),(y=x(o))==null||y.focus())},h(()=>t.value===0)),we(lt,p),qe(h(()=>q(t.value,{0:ee.Open,1:ee.Closed})));let v=h(()=>{var c;return(c=x(o))==null?void 0:c.closest("form")});return ue(()=>{G([v],()=>{if(!v.value||e.defaultValue===void 0)return;function c(){p.theirOnChange(e.defaultValue)}return v.value.addEventListener("reset",c),()=>{var b;(b=v.value)==null||b.removeEventListener("reset",c)}},{immediate:!0})}),()=>{let{name:c,modelValue:b,disabled:y,form:O,...w}=e,f={open:t.value===0,disabled:y,value:B.value};return re(Ee,[...c!=null&&B.value!=null?ke({[c]:B.value}).map(([j,g])=>re(He,Ue({features:Ke.Hidden,key:j,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,name:j,value:g}))):[],Y({ourProps:{},theirProps:{...l,...Se(w,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:f,slots:u,attrs:l,name:"Listbox"})])}}}),ll=U({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${ne()}`}},setup(e,{attrs:u,slots:l,expose:a}){let t=Ie("ListboxButton");a({el:t.buttonRef,$el:t.buttonRef});function n(r){switch(r.key){case k.Space:case k.Enter:case k.ArrowDown:r.preventDefault(),t.openListbox(),N(()=>{var s;(s=x(t.optionsRef))==null||s.focus({preventScroll:!0}),t.value.value||t.goToOption(E.First)});break;case k.ArrowUp:r.preventDefault(),t.openListbox(),N(()=>{var s;(s=x(t.optionsRef))==null||s.focus({preventScroll:!0}),t.value.value||t.goToOption(E.Last)});break}}function o(r){switch(r.key){case k.Space:r.preventDefault();break}}function i(r){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),N(()=>{var s;return(s=x(t.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(r.preventDefault(),t.openListbox(),el(()=>{var s;return(s=x(t.optionsRef))==null?void 0:s.focus({preventScroll:!0})})))}let d=We(h(()=>({as:e.as,type:u.type})),t.buttonRef);return()=>{var r,s;let m={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{id:C,...I}=e,R={ref:t.buttonRef,id:C,type:d.value,"aria-haspopup":"listbox","aria-controls":(r=x(t.optionsRef))==null?void 0:r.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(s=x(t.labelRef))==null?void 0:s.id,C].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:n,onKeyup:o,onClick:i};return Y({ourProps:R,theirProps:I,slot:m,attrs:u,slots:l,name:"ListboxButton"})}}}),nl=U({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${ne()}`}},setup(e,{attrs:u,slots:l,expose:a}){let t=Ie("ListboxOptions"),n=V(null);a({el:t.optionsRef,$el:t.optionsRef});function o(r){switch(n.value&&clearTimeout(n.value),r.key){case k.Space:if(t.searchQuery.value!=="")return r.preventDefault(),r.stopPropagation(),t.search(r.key);case k.Enter:if(r.preventDefault(),r.stopPropagation(),t.activeOptionIndex.value!==null){let s=t.options.value[t.activeOptionIndex.value];t.select(s.dataRef.value)}t.mode.value===0&&(t.closeListbox(),N(()=>{var s;return(s=x(t.buttonRef))==null?void 0:s.focus({preventScroll:!0})}));break;case q(t.orientation.value,{vertical:k.ArrowDown,horizontal:k.ArrowRight}):return r.preventDefault(),r.stopPropagation(),t.goToOption(E.Next);case q(t.orientation.value,{vertical:k.ArrowUp,horizontal:k.ArrowLeft}):return r.preventDefault(),r.stopPropagation(),t.goToOption(E.Previous);case k.Home:case k.PageUp:return r.preventDefault(),r.stopPropagation(),t.goToOption(E.First);case k.End:case k.PageDown:return r.preventDefault(),r.stopPropagation(),t.goToOption(E.Last);case k.Escape:r.preventDefault(),r.stopPropagation(),t.closeListbox(),N(()=>{var s;return(s=x(t.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case k.Tab:r.preventDefault(),r.stopPropagation();break;default:r.key.length===1&&(t.search(r.key),n.value=setTimeout(()=>t.clearSearch(),350));break}}let i=Ge(),d=h(()=>i!==null?(i.value&ee.Open)===ee.Open:t.listboxState.value===0);return()=>{var r,s;let m={open:t.listboxState.value===0},{id:C,...I}=e,R={"aria-activedescendant":t.activeOptionIndex.value===null||(r=t.options.value[t.activeOptionIndex.value])==null?void 0:r.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(s=x(t.buttonRef))==null?void 0:s.id,"aria-orientation":t.orientation.value,id:C,onKeydown:o,role:"listbox",tabIndex:0,ref:t.optionsRef};return Y({ourProps:R,theirProps:I,slot:m,attrs:u,slots:l,features:se.RenderStrategy|se.Static,visible:d.value,name:"ListboxOptions"})}}}),al=U({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${ne()}`}},setup(e,{slots:u,attrs:l,expose:a}){let t=Ie("ListboxOption"),n=V(null);a({el:n,$el:n});let o=h(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===e.id:!1),i=h(()=>q(t.mode.value,{0:()=>t.compare(L(t.value.value),L(e.value)),1:()=>L(t.value.value).some(p=>t.compare(L(p),L(e.value)))})),d=h(()=>q(t.mode.value,{1:()=>{var p;let v=L(t.value.value);return((p=t.options.value.find(c=>v.some(b=>t.compare(L(b),L(c.dataRef.value)))))==null?void 0:p.id)===e.id},0:()=>i.value})),r=Rt(n),s=h(()=>({disabled:e.disabled,value:e.value,get textValue(){return r()},domRef:n}));ue(()=>t.registerOption(e.id,s)),$e(()=>t.unregisterOption(e.id)),ue(()=>{G([t.listboxState,i],()=>{t.listboxState.value===0&&i.value&&q(t.mode.value,{1:()=>{d.value&&t.goToOption(E.Specific,e.id)},0:()=>{t.goToOption(E.Specific,e.id)}})},{immediate:!0})}),fe(()=>{t.listboxState.value===0&&o.value&&t.activationTrigger.value!==0&&N(()=>{var p,v;return(v=(p=x(n))==null?void 0:p.scrollIntoView)==null?void 0:v.call(p,{block:"nearest"})})});function m(p){if(e.disabled)return p.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),N(()=>{var v;return(v=x(t.buttonRef))==null?void 0:v.focus({preventScroll:!0})}))}function C(){if(e.disabled)return t.goToOption(E.Nothing);t.goToOption(E.Specific,e.id)}let I=Je();function R(p){I.update(p)}function P(p){I.wasMoved(p)&&(e.disabled||o.value||t.goToOption(E.Specific,e.id,0))}function B(p){I.wasMoved(p)&&(e.disabled||o.value&&t.goToOption(E.Nothing))}return()=>{let{disabled:p}=e,v={active:o.value,selected:i.value,disabled:p},{id:c,value:b,disabled:y,...O}=e,w={id:c,ref:n,role:"option",tabIndex:p===!0?void 0:-1,"aria-disabled":p===!0?!0:void 0,"aria-selected":i.value,disabled:void 0,onClick:m,onFocus:C,onPointerenter:R,onMouseenter:R,onPointermove:P,onMousemove:P,onPointerleave:B,onMouseleave:B};return Y({ourProps:w,theirProps:O,slot:v,attrs:l,slots:u,name:"ListboxOption"})}}});const W=Fe(le.ui.strategy,le.ui.select,rt),ge=Fe(le.ui.strategy,le.ui.selectMenu,st),ol=U({components:{HCombobox:Kt,HComboboxButton:Wt,HComboboxOptions:Jt,HComboboxOption:Qt,HComboboxInput:Gt,HListbox:tl,HListboxButton:ll,HListboxOptions:nl,HListboxOption:al,UIcon:Le,UAvatar:je},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>W.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>W.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>ge.default.selectedIcon},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},searchable:{type:[Boolean,Function],default:!1},searchablePlaceholder:{type:String,default:"Search..."},clearSearchOnClose:{type:Boolean,default:()=>ge.default.clearSearchOnClose},debounce:{type:Number,default:200},creatable:{type:Boolean,default:!1},showCreateOptionWhen:{type:String,default:()=>ge.default.showCreateOptionWhen},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(W.size).includes(e)}},color:{type:String,default:()=>W.default.color,validator(e){return[...le.ui.colors,...Object.keys(W.color)].includes(e)}},variant:{type:String,default:()=>W.default.variant,validator(e){return[...Object.keys(W.variant),...Object.values(W.color).flatMap(u=>Object.keys(u))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},searchAttributes:{type:Array,default:null},popper:{type:Object,default:()=>({})},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:u,slots:l}){const{ui:a,attrs:t}=ze("select",Ce(e,"ui"),W,Ce(e,"class")),{ui:n}=ze("selectMenu",Ce(e,"uiMenu"),ge),o=h(()=>dt({},e.popper,n.value.popper)),[i,d]=Mt(o.value),{size:r,rounded:s}=vt({ui:a,props:e}),{emitFormBlur:m,emitFormChange:C,inputId:I,color:R,size:P,name:B}=Tt(e,W),p=h(()=>r.value||P.value),v=V(""),c=h({get(){return e.query??v.value},set(F){v.value=F,u("update:query",F)}}),b=h(()=>{var J,be;const F=((be=(J=a.value.color)==null?void 0:J[R.value])==null?void 0:be[e.variant])||a.value.variant[e.variant];return ct(ce(a.value.base,n.value.select,s.value,a.value.size[p.value],a.value.gap[p.value],e.padded?a.value.padding[p.value]:"p-0",F==null?void 0:F.replaceAll("{color}",R.value),(y.value||l.leading)&&a.value.leading.padding[p.value],(O.value||l.trailing)&&a.value.trailing.padding[p.value]),e.selectClass)}),y=h(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),O=h(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),w=h(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),f=h(()=>e.loading&&!y.value?e.loadingIcon:e.trailingIcon||e.icon),j=h(()=>ce(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[p.value])),g=h(()=>ce(a.value.icon.base,R.value&&le.ui.colors.includes(R.value)&&a.value.icon.color.replaceAll("{color}",R.value),a.value.icon.size[p.value],e.loading&&a.value.icon.loading)),S=h(()=>ce(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[p.value])),T=h(()=>ce(a.value.icon.base,R.value&&le.ui.colors.includes(R.value)&&a.value.icon.color.replaceAll("{color}",R.value),a.value.icon.size[p.value],e.loading&&!y.value&&a.value.icon.loading)),M=typeof e.searchable=="function"?pt(e.searchable,e.debounce):void 0,A=ft(async()=>e.searchable&&M?await M(c.value):c.value===""?e.options:e.options.filter(F=>{var J;return((J=e.searchAttributes)!=null&&J.length?e.searchAttributes:[e.optionAttribute]).some(be=>{if(["string","number"].includes(typeof F))return String(F).search(new RegExp(c.value,"i"))!==-1;const xe=yt(F,be);return xe!=null&&String(xe).search(new RegExp(c.value,"i"))!==-1})})),D=h(()=>c.value===""||e.showCreateOptionWhen==="empty"&&A.value.length||e.showCreateOptionWhen==="always"&&A.value.find(J=>["string","number"].includes(typeof J)?J===c.value:J[e.optionAttribute]===c.value)?null:["string","number"].includes(typeof e.modelValue)?c.value:{[e.optionAttribute]:c.value});function K(){e.clearSearchOnClose&&(c.value="")}G(d,F=>{F?u("open"):(K(),u("close"),m())});function ve(F){u("update:modelValue",F),u("change",F),C()}function te(F){c.value=F.target.value}return{ui:a,uiMenu:n,attrs:t,name:B,inputId:I,popper:o,trigger:i,container:d,isLeading:y,isTrailing:O,selectClass:b,leadingIconName:w,leadingIconClass:g,leadingWrapperIconClass:j,trailingIconName:f,trailingIconClass:T,trailingWrapperIconClass:S,filteredOptions:A,createOption:D,query:c,onUpdate:ve,onChange:te}}}),il=["value","required"],ul=["id","disabled"],rl={class:"truncate"};function sl(e,u,l,a,t,n){const o=Le,i=bt("HComboboxInput"),d=je;return $(),Z(pe(e.searchable?"HCombobox":"HListbox"),{by:e.by,name:e.name,"model-value":e.modelValue,multiple:e.multiple,disabled:e.disabled,as:"div",class:z(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:ae(({open:r})=>[e.required?($(),H("input",{key:0,value:e.modelValue,required:e.required,class:z(e.uiMenu.required),tabindex:"-1","aria-hidden":"true"},null,10,il)):Q("",!0),($(),Z(pe(e.searchable?"HComboboxButton":"HListboxButton"),{ref:"trigger",as:"div",role:"button",class:z(e.uiMenu.trigger)},{default:ae(()=>[X(e.$slots,"default",{open:r,disabled:e.disabled,loading:e.loading},()=>[_("button",Re({id:e.inputId,class:e.selectClass,disabled:e.disabled,type:"button"},e.attrs),[e.isLeading&&e.leadingIconName||e.$slots.leading?($(),H("span",{key:0,class:z(e.leadingWrapperIconClass)},[X(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[me(o,{name:e.leadingIconName,class:z(e.leadingIconClass)},null,8,["name","class"])])],2)):Q("",!0),X(e.$slots,"label",{},()=>[e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length?($(),H("span",{key:0,class:z(e.uiMenu.label)},oe(e.modelValue.length)+" selected",3)):!e.multiple&&e.modelValue?($(),H("span",{key:1,class:z(e.uiMenu.label)},oe(["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute]),3)):($(),H("span",{key:2,class:z(e.uiMenu.label)},oe(e.placeholder||" "),3))]),e.isTrailing&&e.trailingIconName||e.$slots.trailing?($(),H("span",{key:1,class:z(e.trailingWrapperIconClass)},[X(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[me(o,{name:e.trailingIconName,class:z(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):Q("",!0)],16,ul)])]),_:2},1032,["class"])),r?($(),H("div",{key:1,ref:"container",class:z([e.uiMenu.container,e.uiMenu.width])},[me(mt,Re({appear:""},e.uiMenu.transition),{default:ae(()=>[_("div",null,[e.popper.arrow?($(),H("div",{key:0,"data-popper-arrow":"",class:z(Object.values(e.uiMenu.arrow))},null,2)):Q("",!0),($(),Z(pe(e.searchable?"HComboboxOptions":"HListboxOptions"),{static:"",class:z([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:ae(()=>[e.searchable?($(),Z(i,{key:0,"display-value":()=>e.query,name:"q",placeholder:e.searchablePlaceholder,autofocus:"",autocomplete:"off",class:z(e.uiMenu.input),onChange:e.onChange},null,8,["display-value","placeholder","class","onChange"])):Q("",!0),($(!0),H(Ee,null,ht(e.filteredOptions,(s,m)=>($(),Z(pe(e.searchable?"HComboboxOption":"HListboxOption"),{key:m,as:"template",value:e.valueAttribute?s[e.valueAttribute]:s,disabled:s.disabled},{default:ae(({active:C,selected:I,disabled:R})=>[_("li",{class:z([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,C?e.uiMenu.option.active:e.uiMenu.option.inactive,I&&e.uiMenu.option.selected,R&&e.uiMenu.option.disabled])},[_("div",{class:z(e.uiMenu.option.container)},[X(e.$slots,"option",{option:s,active:C,selected:I},()=>[s.icon?($(),Z(o,{key:0,name:s.icon,class:z([e.uiMenu.option.icon.base,C?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,s.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):s.avatar?($(),Z(d,Re({key:1},{size:e.uiMenu.option.avatar.size,...s.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):s.chip?($(),H("span",{key:2,class:z(e.uiMenu.option.chip.base),style:gt({background:`#${s.chip}`})},null,6)):Q("",!0),_("span",rl,oe(["string","number"].includes(typeof s)?s:s[e.optionAttribute]),1)])],2),I?($(),H("span",{key:0,class:z([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[me(o,{name:e.selectedIcon,class:z(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):Q("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.creatable&&e.createOption?($(),Z(pe(e.searchable?"HComboboxOption":"HListboxOption"),{key:1,value:e.createOption,as:"template"},{default:ae(({active:s,selected:m})=>[_("li",{class:z([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,s?e.uiMenu.option.active:e.uiMenu.option.inactive])},[_("div",{class:z(e.uiMenu.option.container)},[X(e.$slots,"option-create",{option:e.createOption,active:s,selected:m},()=>[_("span",{class:z(e.uiMenu.option.create)},'Create "'+oe(e.createOption[e.optionAttribute])+'"',3)])],2)],2)]),_:3},8,["value"])):e.searchable&&e.query&&!e.filteredOptions.length?($(),H("p",{key:2,class:z(e.uiMenu.option.empty)},[X(e.$slots,"option-empty",{query:e.query},()=>[Ve(' No results for "'+oe(e.query)+'". ',1)])],2)):e.filteredOptions.length?Q("",!0):($(),H("p",{key:3,class:z(e.uiMenu.empty)},[X(e.$slots,"empty",{query:e.query},()=>[Ve(" No options. ")])],2))]),_:3},8,["class"]))])]),_:3},16)],2)):Q("",!0)]),_:3},8,["by","name","model-value","multiple","disabled","class","onUpdate:modelValue"])}const cl=ut(ol,[["render",sl]]);export{cl as _};
